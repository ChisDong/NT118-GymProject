Table USERS {
  USERS_ID NUMBER(10) [PRIMARY KEY, INCREMENT]
  FULL_NAME NVARCHAR(100) [NOT NULL]
  EMAIL NVARCHAR(150) [UNIQUE, NOT NULL]
	PHONE NVARCHAR(10) [not null, unique]
  CCCD NVARCHAR(15) [not null, unique]
  CREATED_AT DATE
  IS_DELETED NUMBER(1) [not null, default: 0]
}

Table ACCOUNT {
	ACCOUNT_ID NUMBER(10) [primary key, increment]
  USERS_ID NUMBER(10) [not null, ref: - USERS.USERS_ID ]
	USERNAME NVARCHAR(255) [not null, unique]
	PASSWORD NVARCHAR(255) [not null]
  STATUS NVARCHAR(20) [not null, check: `STATUS IN ("PENDING", "ACTIVE", "INACTIVE", "SUSPENDED", "DELETED")`]
  CREATED_AT DATE [not null, default: `SYSDATE`]
}

TABLE ROLE_GROUP {
  GROUP_ID NUMBER(10) [PRIMARY KEY, INCREMENT]
  GROUP_NAME NVARCHAR(100) [UNIQUE, NOT NULL]
  DESCRIPTION NVARCHAR(255)
  CREATED_AT DATE
}

TABLE SYSTEM_FUNCTION {
  SYSTEM_FUNCTION_ID NUMBER(10) [PRIMARY KEY, INCREMENT]
  SYSTEM_FUNCTION_NAME VARCHAR(50) [UNIQUE, NOT NULL]
}

TABLE ROLE {
  ROLE_ID	                 NUMBER(10) [primary key, INCREMENT]
  SYSTEM_FUNCTION_ID	     NUMBER(10) [ref: > SYSTEM_FUNCTION.SYSTEM_FUNCTION_ID]
  ADD_PERMISSION           NUMBER(1) [NOT NULL]
  EDIT_PERMISSION          NUMBER(1) [NOT NULL]
  DELETE_PERMISSION        NUMBER(1) [NOT NULL]
  DOWNLOAD_PERMISSION      NUMBER(1) [NOT NULL]
  VIEW_PERMISSION          NUMBER(1) [NOT NULL]
}

TABLE ACCOUNT_TOKEN {
  TOKEN_ID      NUMBER(20) [primary key, INCREMENT]
  ACCOUNT_ID    NUMBER(10) [not null, REF: > ACCOUNT.ACCOUNT_ID]
  TOKEN_VALUE   VARCHAR2(500) [UNIQUE, NOT NULL]
  EXPIRES_AT    DATE [NOT NULL]
  ISSUED_AT     DATE
  IS_REVOKED    CHAR(1)
}

TABLE ACCOUNT_ROLE_GROUP {
  ACCOUNT_ID NUMBER(10) [ref: > ACCOUNT.ACCOUNT_ID]
  ROLE_GROUP_ID NUMBER(10) [ref: > ROLE_GROUP.GROUP_ID]
  Indexes {
    (ACCOUNT_ID, ROLE_GROUP_ID) [pk]
  }
}

TABLE ASSIGN_ROLE_GROUP {
  ROLE_GROUP_ID NUMBER(10) [ref: > ROLE_GROUP.GROUP_ID]
  ROLE_ID NUMBER(10) [ref: > ROLE.ROLE_ID]
  Indexes {
    (ROLE_GROUP_ID, ROLE_ID) [pk]
  }
}

TABLE ACCOUNT_ASSIGN_ROLE {
  ACCOUNT_ID NUMBER(10) [REF: > ACCOUNT.ACCOUNT_ID]
  ROLE_ID NUMBER(10) [REF: > ROLE.ROLE_ID]
  Indexes {
    (ACCOUNT_ID, ROLE_ID) [pk]
  }
}


Table MEMBER {
  MEMBER_ID NUMBER [primary key, increment]
  ACCOUNT_ID NUMBER [not null,ref: - ACCOUNT.ACCOUNT_ID, unique]
  GENDER NVARCHAR(10) [not null, check: `GENDER IN ("FEMALE", "MALE")`]
  DATE_OF_BIRTH DATE [not null]
  DATE_OF_JOIN DATE [not null, default: `SYSDATE`]
  PHONE NVARCHAR(10) [not null]
  HEIGHT NUMBER(5,2) [not null]
  WEIGHT NUMBER(5,2) [not null]
  GOAL NVARCHAR(255)
  COUNTRY NVARCHAR(255)
}

Table TRAINER
{
  TRAINER_ID NUMBER [primary key, increment]
  ACCOUNT_ID NUMBER [not null,ref: - ACCOUNT.ACCOUNT_ID, unique]
  SPECIALIZATION NVARCHAR(255) [not null]
  SALARY_TYPE NVARCHAR(20) [not null, check: `SALARY_TYPE IN ("FIXED", "PER_CLASS", "PER_MEMBER")`]
  BASE_SALARY DECIMAL(15,2) [not null]
  COMMISSION_RATE DECIMAL(5,2) [not null, default: 0]
  START_DATE DATE [not null, default: `SYSDATE`]
  RATING NUMBER [not null, check: `RATING IN (0,5)`]
}

Table ADMIN {
  ADMIN_ID NUMBER [primary key, increment]
  ACCOUNT_ID NUMBER [not null, ref: - ACCOUNT.ACCOUNT_ID, unique]
  POSITION NVARCHAR(100)
  NOTE NVARCHAR(255)
}

Table CLASS {
  CLASS_ID NUMBER [primary key, increment]
  CLASS_NAME NVARCHAR(150) [not null]
  CLASS_TYPE NVARCHAR(100) // Gym, Yoga, Pilates, Zumba...
  TRAINER_ID NUMBER [ref: > TRAINER.TRAINER_ID]
  DESCRIPTION NVARCHAR(255) [not null]
  CLASS_LEVEL NVARCHAR(255) [not null, check: `CLASS_LEVEL IN ("BEGINNER", "InTERMEDIATED", "ADVANCED")`]
  MAX_MEMBER NUMBER [not null]
  ROOM NVARCHAR(100) [not null]
  STATUS NVARCHAR(20) [not null, check: `STATUS IN ("PLANNED","ACTIVE", "FULL", "CANCELLED", "COMPLETED")`]
}

Table PACKAGE {
  PACKAGE_ID NUMBER [primary key, increment]
  PACKAGE_NAME NVARCHAR(150) [not null]
  DESCRIPTION NVARCHAR(255)
  PRICE DECIMAL(15,2) [not null]
  DURATION_DAYS NUMBER [not null] // Tính theo ngày
  TOTAL_SESSIONS NUMBER // Buổi tập
  PACKAGE_TYPE NVARCHAR(100) // Gym / Yoga / Full ...
  STATUS NVARCHAR(20) [not null, check: `STATUS IN ("AVAILABLE", "UNAVAILABLE", "ARCHIVED")`]
}

Table PACKAGE_CLASS {
  PACKAGE_ID NUMBER [not null, ref: > PACKAGE.PACKAGE_ID]
  CLASS_ID NUMBER [not null, ref: > CLASS.CLASS_ID]
  Indexes {
    (PACKAGE_ID, CLASS_ID) [pk]
  }
}

Table REGISTER {
  REGISTER_ID NUMBER [primary key, increment]
  MEMBER_ID NUMBER [not null, ref: > MEMBER.MEMBER_ID]
  PACKAGE_ID NUMBER [not null, ref: > PACKAGE.PACKAGE_ID]
  REGISTER_DATE DATE [not null, DEFAULT: `SYSDATE` ]
  START_DATE DATE [not null]
  END_DATE DATE [not null]
  TOTAL_SESSIONS NUMBER [not null] //Trigger cho bằng với PACKAGE.TOTAL_SESSIONS
  USED_SESSIONS NUMBER [not null, default: 0]
  STATUS VARCHAR(20) [not null, check: `STATUS IN ("PENDING_PAYMENT", "ACTIVE", "EXPIRED", "CANCELLED", "COMPLETED")`]
  Indexes {
    (START_DATE, END_DATE) [note: 'END_DATE > START_DATE']
    (TOTAL_SESSIONS, USED_SESSIONS) [note: 'USED_SESSIONS <= TOTAL_SESSIONS']
  }
}

Table PAYMENT {
  PAYMENT_ID NUMBER [primary key, increment]
  REGISTER_ID NUMBER [not null, ref: > REGISTER.REGISTER_ID]
  AMOUNT DECIMAL(15,2) [not null]
  PAYMENT_METHOD NVARCHAR(50) // CASH, BANKING, MOMO
  PAYMENT_DATE DATE [not null, default: `SYSDATE`]
  STATUS NVARCHAR(20) [not null, check: `STATUS IN ("PENDING", "SUCCESS", "FAILED", "REFUNDED")`]
  TRANSACTION_CODE NVARCHAR(100) [not null, unique]
}

Table ROOM {
  ROOM_ID NUMBER [primary key, increment]
  ROOM_CODE NVARCHAR2(50) [not null, unique]
  ROOM_NAME NVARCHAR2(150) [not null]
  ROOM_TYPE NVARCHAR2(50) [not null]
  CAPACITY NUMBER [not null]
  STATUS NVARCHAR2(20) [not null, check: `STATUS IN ('ACTIVE','MAINTENANCE','INACTIVE')`]
}

Table SCHEDULE {
  SCHEDULE_ID NUMBER [primary key, increment]
  CLASS_ID NUMBER [not null, ref: > CLASS.CLASS_ID]
  ROOM_ID NUMBER [not null, ref: > ROOM.ROOM_ID]
  TRAINER_ID NUMBER [not null, ref: > TRAINER.TRAINER_ID]
  START_TIME timestamp [not null]
  END_TIME timestamp [not null]
  MAX_MEMBER NUMBER [not null]
  CREATED_AT DATE [not null, default: `SYSDATE`]
  STATUS NVARCHAR(20) [not null, check: `STATUS IN ("SCHEDULED", "CANCELLED", "COMPLETED", "RESCHEDULED")`]
  Indexes {
  (START_TIME, END_TIME) [note: 'END_TIME > START_TIME']
}
}

Table REGISTER_SCHEDULE {
  REGISTER_SCHEDULE_ID NUMBER [primary key, increment]
  REGISTER_ID NUMBER [not null, ref: > REGISTER.REGISTER_ID]
  SCHEDULE_ID NUMBER [not null, ref: > SCHEDULE.SCHEDULE_ID]
  STATUS NVARCHAR(20) [not null, check: `STATUS IN ("BOOKED", "ATTENDED", "MISSED", "CANCELLED")`]
  Indexes {
    (REGISTER_ID, SCHEDULE_ID) [unique]
  }
}

Table CHECKIN {
  CHECKIN_ID NUMBER [primary key, increment]
  REGISTER_SCHEDULE_ID NUMBER [not null, ref: > REGISTER_SCHEDULE.REGISTER_SCHEDULE_ID]
  CHECKIN_TIME DATE [not null, DEFAULT: `SYSDATE`]
  STATUS NVARCHAR(20) [not null, check: `STATUS IN ("SUCCESS", "LATE", "INVALID")`]
  NOTE NVARCHAR(255)
}

Table NOTIFICATION {
  NOTIFICATION_ID NUMBER [primary key, increment]
  ACCOUNT_ID NUMBER [not null, ref: > ACCOUNT.ACCOUNT_ID]
  REGISTER_ID NUMBER [ref: > REGISTER.REGISTER_ID, null]
  SCHEDULE_ID NUMBER [ref: > SCHEDULE.SCHEDULE_ID, null]
  TITLE NVARCHAR(255) [not null]
  MESSAGE NVARCHAR(500) [not null]
  TYPE NVARCHAR(50) [not null, check: `TYPE IN ("SYSTEM", "PAYMENT", "SCHEDULE", "REMINDER")`]
  CREATED_AT DATE [not null, default: `SYSDATE`]
  STATUS NVARCHAR(20) [not null, check: `STATUS IN ("READ", "UNREAD")`]
  READ_AT DATE
}